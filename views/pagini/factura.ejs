<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<title>Factură</title>
		<style>
			body{
				counter-reset: cnt;
			}
			#tabl{
				border-collapse:collapse;
			}
			tr{
				counter-increment: cnt;
			}

			#tabl td, #tabl th{
				border:1px solid black;
			}

			p{color:grey};
			#container-tabel::after{
				content:"Numar produse" counter(cnt);
				display: block;
			}
		</style>
		<link rel="stylesheet" href="<%- locals.protocol%><%- locals.domeniu %>/resurse/css/pagini/factura/factura.css" type="text/css">
		<script src="<%- locals.protocol%><%- locals.domeniu %>/resurse/js/factura.js"></script>
	</head>
	<body>
		<h1>Factură PC Components</h1>
		<p>Stimate domn <%-locals.utilizator.nume %>, aveți aici lista de produse achiziționate.</p> 
		<div id="container-tabel">
			<table id="tabl" class="table  table-striped">
				<thead>
					<tr>
						<th>Produs</th>
						<th>Cantitate</th>
						<th>Preț</th>
						<th>QR</th>
					</tr>
				</thead>
				
				<tbody>
					<% 
					var suma=0;
					for (let i=0; i < locals.produse.length; ++i) { %>
						<%
							suma += parseFloat(locals.produse[i].pret) * locals.cantitate[i];
						%>
						<tr>
							<td><%=  locals.produse[i].nume %></td>
							<td><%=  locals.cantitate[i] %></td>
							<td><%=  locals.produse[i].pret %></td>
							<td><img src="<%- locals.protocol%><%- locals.domeniu %>/resurse/imagini/qrcode/<%- locals.produse[i].id %>.png"></td>
						</tr>
					<% } %>
				</tbody>
				<tfoot>
					<tr>
						<td colspan="3">Total: <%- suma %></td>
					</tr>
				</tfoot>
			</table>
		</div>
	</body>
</html>